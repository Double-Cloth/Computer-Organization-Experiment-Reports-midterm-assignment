# 电路设计
## 密码锁功能
* 可并行设定4位二进制数组成的密码
* 开锁指令为二进制数序列，通过串行方式输入
* 可以在输入时进行退格操作
* 可以显示当前输入的密码
* 输入密码和预设密码一致时提示密码正确
* 输入密码和预设密码不一致或密码锁被锁定时产生报警信号
* 显示错误输入密码的次数，当超过5次时电子锁被锁住，不能被打开

## 输入部分

![输入电路](.\电路图\输入电路.jpg)

### 使用方法

* 输入密码时，将K2置为0，将K1置为想要输入的密码值（0或1）然后点击K4。

* 回退密码时，将K2置为1，点击一次K4回退一位。

* 点击K3清空所有密码（全部置0）。

* 将K11设为0会隐藏输入的密码；反之，则显示当前输入的密码。

### 设计原理

#### 输入

* 当K2为0时，s1=1,s2=0，74LS194芯片为左移模式。

* K1为0时，74LS194芯片左移后在低位补0，实现输入0；反之，则输入1。

* 确认输入使用单次脉冲信号（K4）触发左移，实现了从高位到低位，从右到左的串行输入，在时钟上升沿时，数据会按照当前控制信号的要求（左移）在寄存器内部移位。

#### 退格
* 当K2为1时，s1=0,s2=1，74LS194芯片为右移模式。
* 此时在时钟上升沿时，数据会按照当前控制信号的要求（右移）在寄存器内部移位，从而移除最低位。
* 需要注意的是，右移后，由于SR始终为0，所以最高位会始终补0。
#### 清零
* 按下K3后~CLR变为低电平，使输出全为0从而实现清零操作。
## 密码设置与验证部分
![密码设置与验证](.\电路图\密码设置与验证.jpg)
### 使用方法
* K5，K6，K7，K8对应输入部分的A，B，C，D四个灯，当K5，K6，K7，K8与A，B，C，D四个灯状态相同时，输出1表示密码匹配，否则输出0。
### 设计原理
* 在密码锁中，74LS85用于比较用户输入的密码和预设的密码，74LS85是一个4位数字比较器，用于比较两个4位二进制数的大小。它有三个输出端：
  *A>B：当输入A大于B时输出高电平*
  *A=B：当输入A等于B时输出高电平*
  *A<B：当输入A小于B时输出高电平*
* 预设密码通过B3、B2、B1和B0直接连接到74LS85的B组输入端，设置为固定的高低电平组合，等待A端的输入后再进行比较。
* 当用户依次按下按键，进行密码输入时，按键信号会转换成对应的二进制组合并送入A 端。74LS85 芯片会实时比较A 和B 端的输入。如果两者的输入完全相同，则A=B引脚输出高电平，表示密码输入正确。若密码不匹配，则A=B 引脚保持低电平，而A>B 或A<B 可能会产生高电平（具体取决于输入值），表示输入的密码不正确。
## 密码确认和报警部分
![密码确认与报警](.\电路图\密码确认与报警.jpg)
### 使用方法
* 点击K9，若密码正确且密码锁未被锁定，则灯亮；若密码错误或密码锁被锁定，则蜂鸣器响。
### 设计原理
* 将74LS85 四位比较器的输出端OAEQB（当输入密码与设置的密码相同时为高电平）和按钮K9作为U1与门的输入，当密码正确且按下确认密码的K9按钮时，U1输出1，灯泡亮（密码锁未被锁定时），表示输入正确。
* 将四位比较器的输出端OAEQB 经过非门后与K9用与门连接，当密码错误且按下确认密码的K9 按钮时，U3 输出1，蜂鸣器报警，且输出一次表示输入错误的信号。当没有按下K9的时候，表示没有确认密码，此时，无论比较器的输出是1 还是0，灯泡不会亮，蜂鸣器不会报警。
* 当密码锁被锁定时，U2 有一端为0，其输出始终为0，灯始终不亮。此时若按下按钮K9，则U4两个输入均为1，输出也为1，此时蜂鸣器会响。
## 输入错误记数部分
![输入错误记数](.\电路图\输入错误记数.jpg)
### 使用方法
* 显示器会显示输入错误的次数（0-5），当次数达到5时会停止计数并停留在5，并返回一个锁定信号至密码确认和报警部分和锁定倒计时部分。
### 设计原理

* 对于74LS90计数器，使用5421码（ADBC），DCD_HEX七段数码显示管要求的是8421码输入。但考虑到只需要显示0-5这五个数码（最大允许输入错误个数为5），因此只需要当5421码是1000（十进制的5）的时候，让数码显示管也显示5就能实现目标。所以数码显示管的第一位（最高位）保持低电平，不会被用到，第二位的输入是A or D, 第三位的输入是C，第三位的输入是A or B，这样就把5421码的在9数码显示管上正确显示。
* 当输入错误密码次数达到5时，A第一次为高电平，通过非门反馈至U5，从而U5有一个输入端始终为低电平导致其输出始终为0。此时如果继续确认密码，数码显示管会一直显示5，A 也会一直为高电平，A 的结果通过非门输出低电平，这样U2 与门的输出会一直为低电平，灯泡一直不会亮，实现了锁定电子锁功能。
## 锁定倒计时部分
![锁定倒计时](.\电路图\锁定倒计时.jpg)
### 使用方法
* 接收到锁定信号后，9秒倒计时启动，当倒计时结束时，返回解除锁定信号至输入错误计数部分，重置锁定计数器。重置后的锁定计数器返回解除锁定信号将倒计时置9。
### 设计原理
* 倒计时使用74LS192芯片，load端和up端接锁定信号。在没有锁定时，load输入低电平置数为9；在锁定后load端输入为高电平，开始计时。Down端接脉冲源，up端为高电平时开始倒计时。当倒计时从9变为0后，由于0时QA-QD输出全为低电平，所以使得三个或门总输出输出为低电平，从而RO2端输入高电平，计数器清零，锁定信号重新变为低电平实现重新置9，等待下次倒计时。
## 总电路图
![总电路图](.\电路图\总电路图.jpg)



# 使用的芯片

## 74LS194芯片

### 74LS194芯片引脚图

![74LS194引脚图](.\74系列芯片\74LS194引脚图.png)

* DSR是右移串行数据输入端
* DSL是左移串行数据输入端
* ~CLR为异步清零输入端 

### 74LS194逻辑功能表

![74LS194逻辑功能表](.\74系列芯片\74LS194逻辑功能表.png)

* 第一行表示寄存器异步清零操作
* 第二行为保持状态
* 第三、四行为串行数据右移操作
* 第五、六行为串行数据的左移操作
* 第七行为并行数据同步置数操作
## 74LS85芯片
### 74LS85芯片引脚图
![74LS85引脚图](.\74系列芯片\74LS85引脚图.png)
### 74LS85逻辑功能表
![74LS85逻辑功能表](.\74系列芯片\74LS85逻辑功能表.png)
## 74LS90芯片
### 74LS90芯片引脚图
![74LS90引脚图](.\74系列芯片\74LS90引脚图.png)
### 74LS90逻辑功能表
![74LS90逻辑功能表](.\74系列芯片\74LS90逻辑功能表.png)
## 74LS192芯片
### 74LS192芯片引脚图
**74LS192是双时钟方式的十进制可逆计数器。**
![74LS192引脚图](.\74系列芯片\74LS192引脚图.png)

* CPU为加计数时钟输入端，CPD为减计数时钟输入端。  
* LD为预置输入控制端，异步预置。
* CR为复位输入端，高电平有效，异步清除。  
* CO为进位输出：1001状态后负脉冲输出， 
* BO为借位输出：0000状态后负脉冲输出。

### 74LS192逻辑功能表
![74LS192逻辑功能表](.\74系列芯片\74LS192逻辑功能表.png)

